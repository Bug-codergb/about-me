import{_ as y,p as c,b1 as E,v as F,P as u,c as l,o as e,b0 as m,j as h,n as t,F as A,B as f}from"./chunks/framework.yGdRLqI0.js";const D="/about-me/6.jpg",C="_container_jforj_2",b="_ul_jforj_13",_={container:C,"img-item":"_img-item_jforj_8",ul:b,"img-item-li":"_img-item-li_jforj_18"},R=JSON.parse('{"title":"实现图片懒加载","description":"","frontmatter":{},"headers":[],"relativePath":"fragments/lazyload/index.md","filePath":"fragments/lazyload/index.md"}'),B={name:"fragments/lazyload/index.md"},v=Object.assign(B,{setup(x){function g(i,a){return i.getBoundingClientRect().top-p.value.getBoundingClientRect().top<=a}function d(i){return new Promise((a,n)=>{let s=new Image;s.src=i,s.onload=a,s.onerror=n})}const k=c([{url:"/about-me/1.jpg",ref:null},{url:"/about-me/2.jpg",ref:null},{url:"/about-me/3.jpg",ref:null},{url:"/about-me/4.jpg",ref:null},{url:"/about-me/5.jpg",ref:null}]),p=E("img-container");E("ul");const r=()=>{const i=p.value.offsetHeight;for(let a of k.value){const n=a.ref,s=n.querySelector("img");g(n,i)&&s.getAttribute("data-loaded")===null&&(s.setAttribute("src","/about-me/6.jpg"),d(a.url).then(()=>{setTimeout(()=>{s.setAttribute("src",a.url),s.setAttribute("data-loaded","1")},500)}).catch(S=>{s.setAttribute("src","/about-me/6.jpg"),s.setAttribute("data-loaded","1")}))}};F(()=>{u(()=>{r()})});const o=()=>{r(),console.log("--")};return(i,a)=>(e(),l("div",null,[a[0]||(a[0]=m("",7)),h("div",{class:t(i.$style.container),ref:"img-container",onScroll:o},[h("ul",{ref:"ul",class:t(i.$style.ul)},[(e(!0),l(A,null,f(k.value,n=>(e(),l("li",{class:t(i.$style["img-item-li"]),key:n.url,ref_for:!0,ref:s=>n.ref=s},[h("img",{class:t(i.$style["img-item"]),src:D},null,2)],2))),128))],2)],34)]))}}),j={$style:_},P=y(v,[["__cssModules",j]]);export{R as __pageData,P as default};
