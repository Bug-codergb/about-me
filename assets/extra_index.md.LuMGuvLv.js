const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/OrbitControls.CD2FB1-f.js","assets/chunks/three.module.BTr0-ffp.js","assets/chunks/CSS2DRenderer.DzCxT8Fu.js"])))=>i.map(i=>d[i]);
import{C as X,c as Y,o as Z,j as L,G as q,a as $,w as ee,k as te,d as ne,v as ae,V as R,p as oe,x as re,aC as G}from"./chunks/framework.C7kaS1yO.js";const de=JSON.parse('{"title":"3D 全球国家分布","description":"","frontmatter":{"title":"3D 全球国家分布","aside":false},"headers":[],"relativePath":"extra/index.md","filePath":"extra/index.md"}'),se={name:"extra/index.md"},pe=Object.assign(se,{setup(ie){const H=ne({setup(){const i=oe(null);let t,o,r,s,c,O,j,B,v,b;const I=(e,C,h)=>{const m=(90-C)*(Math.PI/180),d=(e+90)*(Math.PI/180);return{x:-h*Math.sin(m)*Math.cos(d),y:h*Math.cos(m),z:h*Math.sin(m)*Math.sin(d)}};return ae(async()=>{if(typeof window>"u")return;const e=await R(()=>import("./chunks/three.module.BTr0-ffp.js"),[]),{OrbitControls:C}=await R(async()=>{const{OrbitControls:n}=await import("./chunks/OrbitControls.CD2FB1-f.js");return{OrbitControls:n}},__vite__mapDeps([0,1])),{CSS2DRenderer:h,CSS2DObject:m}=await R(async()=>{const{CSS2DRenderer:n,CSS2DObject:f}=await import("./chunks/CSS2DRenderer.DzCxT8Fu.js");return{CSS2DRenderer:n,CSS2DObject:f}},__vite__mapDeps([2,1]));t=new e.Scene,t.background=new e.Color("#030307");const d=i.value.clientWidth,p=700;o=new e.PerspectiveCamera(45,d/p,.1,3e3),o.position.set(0,50,350),r=new e.WebGLRenderer({antialias:!0,alpha:!0}),r.setSize(d,p),r.setPixelRatio(window.devicePixelRatio),i.value.appendChild(r.domElement),s=new h,s.setSize(d,p),s.domElement.style.position="absolute",s.domElement.style.top="0px",s.domElement.style.pointerEvents="none",i.value.appendChild(s.domElement),c=new C(o,r.domElement),c.enableDamping=!0,c.autoRotate=!1,c.minDistance=120,c.maxDistance=800,t.add(new e.AmbientLight(16777215,.4));const T=new e.DirectionalLight(16777215,1.2);T.position.set(5,3,5),t.add(T);const J=new e.TextureLoader,E=100,K=J.load("https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg"),Q=new e.MeshPhongMaterial({map:K,shininess:5,transparent:!0,opacity:.95});j=new e.Mesh(new e.SphereGeometry(E,64,64),Q),t.add(j),v=new e.Group,t.add(v),b=new e.Group,t.add(b);try{(await(await fetch("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson")).json()).features.forEach(D=>{const{geometry:w,properties:u}=D,N=w.type,S=w.coordinates,U=a=>{const l=[];a.forEach(y=>{const{x:P,y:z,z:A}=I(y[0],y[1],E+.2);l.push(new e.Vector3(P,z,A))});const x=new e.BufferGeometry().setFromPoints(l),M=new e.LineBasicMaterial({color:u.name==="China"?"#ffeb3b":"#409eff",opacity:.6,transparent:!0});v.add(new e.Line(x,M))};if(N==="Polygon"?S.forEach(a=>U(a)):N==="MultiPolygon"&&S.forEach(a=>a.forEach(l=>U(l))),["China","USA","Russia","Brazil","Canada","Australia","India","France","Egypt","South Africa"].includes(u.name)){const a=S.flat(1/0);let l=0,x=0;for(let _=0;_<a.length;_+=2)l+=a[_],x+=a[_+1];const M=l/(a.length/2),y=x/(a.length/2),{x:P,y:z,z:A}=I(M,y,E+2),g=document.createElement("div");g.className="country-label",g.textContent=u.name==="China"?"中国":u.name,u.name==="China"&&g.classList.add("highlight-china");const W=new m(g);W.position.set(P,z,A),b.add(W)}})}catch(n){console.error("Borders Load Fail",n)}const V=new e.BufferGeometry,k=[];for(let n=0;n<3e3;n++){const f=(Math.random()-.5)*2e3,D=(Math.random()-.5)*2e3,w=(Math.random()-.5)*2e3;k.push(f,D,w)}V.setAttribute("position",new e.Float32BufferAttribute(k,3)),B=new e.Points(V,new e.PointsMaterial({color:8947848,size:.5})),t.add(B);const F=()=>{O=requestAnimationFrame(F),c.update(),r.render(t,o),s.render(t,o)};F(),window.addEventListener("resize",()=>{if(!i.value)return;const n=i.value.clientWidth;o.aspect=n/p,o.updateProjectionMatrix(),r.setSize(n,p),s.setSize(n,p)})}),re(()=>{cancelAnimationFrame(O),r&&r.dispose()}),()=>G("div",{style:{position:"relative"}},[G("div",{ref:i,style:{width:"100%",height:"700px",background:"#030307",borderRadius:"16px",overflow:"hidden"}}),G("div",{style:{position:"absolute",bottom:"20px",left:"20px",color:"#aaa",fontSize:"12px",pointerEvents:"none"}},"提示：中国已用黄色高亮标注，支持鼠标旋转/缩放")])}});return(i,t)=>{const o=X("ClientOnly");return Z(),Y("div",null,[t[0]||(t[0]=L("h1",{id:"�-3d-全球国家分布",tabindex:"-1"},[$("� 3D 全球国家分布 "),L("a",{class:"header-anchor",href:"#�-3d-全球国家分布","aria-label":'Permalink to "� 3D 全球国家分布"'},"​")],-1)),t[1]||(t[1]=L("p",null,"这是一个交互式 3D 全球地图，通过 Three.js 渲染地表纹理与行政边界，直观展示全球国家分布。",-1)),q(o,null,{default:ee(()=>[q(te(H))]),_:1})])}}});export{de as __pageData,pe as default};
