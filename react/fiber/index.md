# Fiber数据结构，以及流程
## Fiber简介
Fiber是一种数据结构，也是一种算法
- 增量渲染，将渲染工作拆分为多个小块，分布在多个帧中执行
- 调度能力，能够暂停，中止，复用工作，为不同更新分配优先级
## Fiber概念
在 Fiber 架构中，每个 React 元素都对应一个 Fiber 节点，它包含了组件的类型、状态、props 等信息。Fiber 节点构成了一个链表树结构
## 双缓存技术
React 会维护两棵 Fiber 树
- current 树：当前屏幕上显示内容对应的 Fiber 树
- workInProgress 树：正在构建的 Fiber 树

在内存中构建完整的更新，然后一次性提交到 DOM
## 渲染阶段与提交阶段
- **渲染阶段**
  - 创建 Fiber 树
  - 标记需要进行的 DOM 更新（副作用）
  - 可以被中断、暂停或重新开始
- **提交阶段**
  - 执行所有标记的副作用（DOM 更新）
  - 一次性完成，确保 UI 一致性
## 时间切片
- Fiber 将渲染工作分成小任务，通过 requestIdleCallback（或 polyfill）在浏览器空闲时段执行
- React 为不同更新分配不同优先级